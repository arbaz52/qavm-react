{"version":3,"sources":["components/Header/Header.jsx","components/WelcomeBanner/WelcomeBanner.jsx","pages/IndexPage/IndexPage.jsx","components/ModalUsername/ModalUsername.jsx","components/HostMeetingForm/HostMeetingForm.jsx","pages/HostMeetingPage/HostMeetingPage.jsx","components/JoinMeetingForm/JoinMeetingForm.jsx","pages/JoinMeetingPage/JoinMeetingPage.jsx","components/ParticipantsListItem/ParticipantsListItem.jsx","components/LocalParticipant/LocalParticipant.jsx","components/ParticipantsList/ParticipantsList.jsx","components/MeetingInfo/MeetingInfo.jsx","components/ParticipantMiniVideo/ParticipantMiniVideo.jsx","pages/MeetingPage/MeetingPage.jsx","App.js","index.js"],"names":["Header","useContext","UserContext","username","logout","setAskForUsername","askForUsername","useState","isOpen","setIsOpen","HeaderContext","showHeader","className","Navbar","expand","light","NavbarBrand","tag","Link","to","NavbarToggler","onClick","Collapse","navbar","Nav","NavItem","UncontrolledDropdown","DropdownToggle","nav","caret","DropdownMenu","right","DropdownItem","e","Button","color","style","borderRadius","overflow","WelcomeBanner","src","alt","ButtonGroup","IndexPage","ModalUsername","loading","setLoading","login","validationSchema","yup","required","Modal","centered","ModalHeader","ModalBody","initialValues","onSubmit","console","log","then","res","catch","err","finally","FormGroup","Label","as","Input","name","msg","type","disabled","HostMeetingForm","history","useHistory","error","setError","hostMeeting","title","useEffect","push","_id","HostMeetingPage","JoinMeetingForm","link","window","location","href","JoinMeetingPage","ParticipantsListItem","props","audio","audioTrack","video","toggleAudio","toggleVideo","local","audioRef","useRef","current","srcObject","MediaStream","ref","autoPlay","fontWeight","LocalParticipant","videoTrack","videoRef","muted","size","ParticipantsList","participants","map","_p","key","user_id","MeetingInfo","setShowHeader","marginRight","navigator","clipboard","writeText","toast","info","position","ParticipantMiniVideo","showInfo","MeetingPage","meetingId","match","params","getMeetingInfo","MeetingContext","meeting","setMeeting","DailyIframe","createCallObject","callObject","setParticipants","localParticipant","setLocalParticipant","focusedParticipant","setFocusedParticipant","videosWrapperRef","focusParticipantRef","videosHolderRef","loadParticipantInfo","axios","get","_part","data","handleCallObjectEvents","action","replace","setLocalAudio","setLocalVideo","callerId","put","headers","getAuthHeader","setTimeout","sendAppMessage","by","Object","keys","k","participant","filter","events","_event","on","join","url","room","off","InputGroup","placeholder","bsSize","InputGroupAddon","addonType","localAudio","localVideo","classList","add","remove","display","justifyContent","alignItems","height","Spinner","createContext","token","localStorage","getItem","authorization","App","setUsername","Provider","value","Promise","resolve","reject","message","removeItem","post","setItem","user","path","component","exact","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.18f5f4b4.chunk.js","sourcesContent":["import React, { useContext, useState } from 'react'\r\nimport { Button, Collapse, DropdownItem, DropdownMenu, DropdownToggle, Nav, Navbar, NavbarBrand, NavbarToggler, NavItem, NavLink, UncontrolledDropdown } from 'reactstrap'\r\nimport './Header.css'\r\nimport { HeaderContext, UserContext } from '../../App'\r\nimport { Link } from 'react-router-dom'\r\nconst Header = () => {\r\n\r\n    const { username, logout, setAskForUsername, askForUsername } = useContext(UserContext)\r\n\r\n    const [isOpen, setIsOpen] = useState(false)\r\n    const toggle = () => {\r\n        setIsOpen(!isOpen)\r\n    }\r\n\r\n    const { showHeader } = useContext(HeaderContext)\r\n\r\n    return (\r\n        showHeader && (\r\n            <header className=\"container sticky-top\">\r\n                <Navbar expand=\"md\" light>\r\n                    <NavbarBrand tag={Link} to=\"/\" className=\"mx-2 text-primary\">\r\n                        qavm\r\n                </NavbarBrand>\r\n                    <NavbarToggler onClick={toggle} />\r\n                    <Collapse isOpen={isOpen} navbar>\r\n                        <Nav navbar className=\"ml-auto\">\r\n                            <NavItem>\r\n                                <Link to=\"/join\" className=\"mx-2 text-primary\">\r\n                                    Join a meeting\r\n                            </Link>\r\n                            </NavItem>\r\n                            <NavItem>\r\n                                <Link to=\"/host\" className=\"mx-2 text-primary\">\r\n                                    Host a meeting\r\n                            </Link>\r\n                            </NavItem>\r\n                        </Nav>\r\n                    </Collapse>\r\n                    <Collapse isOpen={isOpen} navbar>\r\n                        <Nav navbar className=\"ml-auto\">\r\n                            {!username ? (\r\n                                <NavItem>\r\n                                    <Button color=\"primary\" style={{ borderRadius: 75, overflow: \"none\" }} onClick={e => { setAskForUsername(true) }}>\r\n                                        Get Started\r\n                                </Button>\r\n                                </NavItem>\r\n                            ) : (\r\n                                    <NavItem>\r\n                                        <UncontrolledDropdown >\r\n                                            <DropdownToggle nav caret>\r\n                                                {username}\r\n                                            </DropdownToggle>\r\n                                            <DropdownMenu right>\r\n                                                <DropdownItem onClick={e => { logout(); setAskForUsername(true); }}>\r\n                                                    Not {username}?\r\n                                            </DropdownItem>\r\n                                            </DropdownMenu>\r\n                                        </UncontrolledDropdown>\r\n                                    </NavItem>\r\n                                )\r\n                            }\r\n                        </Nav>\r\n                    </Collapse>\r\n                </Navbar>\r\n            </header>\r\n        )\r\n    )\r\n}\r\n\r\nexport default Header","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport { Button, ButtonGroup } from 'reactstrap'\r\n\r\nconst WelcomeBanner = () => {\r\n    return (\r\n        <section className=\"row justify-content-center align-items-center\">\r\n            <div className=\"py-5 col-sm-12 col-md-6\">\r\n                <img src=\"undraw_video_call_kxyp.svg\" alt=\"\" className=\"img-fluid\" />\r\n            </div>\r\n            <div className=\"py-5 col-sm-12 col-md-6\">\r\n                <h1>\r\n                    <strong>\r\n                        QAVM\r\n                    </strong>\r\n                </h1>\r\n                <p className=\"lead\">Quick Audio Video Meetings</p>\r\n                <p className=\"text-muted\">Lorem ipsum dolor sit amet consectetur adipisicing elit. Assumenda temporibus provident, labore nobis, nostrum praesentium quidem ea optio vero molestias nisi, quia explicabo cumque dignissimos sit similique officiis unde doloremque!</p>\r\n                <ButtonGroup>\r\n                    <Button tag={Link} to=\"/join\" color=\"info\">Join a meeting</Button>\r\n                    <Button tag={Link} to=\"/host\" color=\"primary\">Host a meeting</Button>\r\n                </ButtonGroup>\r\n            </div>\r\n        </section>\r\n    )\r\n}\r\n\r\nexport default WelcomeBanner","import React from 'react'\r\nimport WelcomeBanner from '../../components/WelcomeBanner/WelcomeBanner'\r\n\r\nconst IndexPage = () => {\r\n    return (\r\n        <>\r\n        \r\n            <WelcomeBanner />\r\n        </>\r\n    )\r\n}\r\n\r\nexport default IndexPage","import { ErrorMessage, Field, Form, Formik } from 'formik'\r\nimport React, { useContext, useEffect, useState } from 'react'\r\nimport { Button, FormGroup, Input, Label, Modal, ModalBody, ModalHeader } from 'reactstrap'\r\nimport { UserContext } from '../../App'\r\nimport * as yup from 'yup'\r\n\r\nconst ModalUsername = () => {\r\n    const [loading, setLoading] = useState(false)\r\n\r\n    const { username, logout, askForUsername, setAskForUsername, login } = useContext(UserContext)\r\n    const initialValues = {\r\n        username: \"\"\r\n    }\r\n    const validationSchema = yup.object({\r\n        username: yup.string().required()\r\n    })\r\n    const onSubmit = ({username}) => {\r\n        console.log(username)\r\n        setLoading(true)\r\n        login(username)\r\n        .then(res => {\r\n            setLoading(false)\r\n            setAskForUsername(false)\r\n        })\r\n        .catch(err => {\r\n            setLoading(false)\r\n        })\r\n        .finally()\r\n    }\r\n    return (\r\n\r\n        <Modal isOpen={askForUsername} centered>\r\n            <ModalHeader>\r\n                Let's get started!\r\n          </ModalHeader>\r\n            <ModalBody>\r\n\r\n                <Formik\r\n                    initialValues={initialValues}\r\n                    validationSchema={validationSchema}\r\n                    onSubmit={onSubmit}>\r\n                    <Form>\r\n                        <FormGroup className=\"\">\r\n                            <Label>What should i call you?</Label>\r\n                            <Field as={Input} name=\"username\" />\r\n                            <ErrorMessage name=\"username\">{msg => <div className=\"alert alert-danger mt-2\">{msg}</div>}</ErrorMessage>\r\n                        </FormGroup>\r\n                        <FormGroup className=\"text-right\">\r\n                            <Button color=\"\" type=\"button\"  disabled={loading} onClick={e => setAskForUsername(false)}>Cancel</Button> {' '}\r\n                            <Button color=\"primary\" type=\"submit\" disabled={loading}>Let's get started!</Button>\r\n                        </FormGroup>\r\n                    </Form>\r\n                </Formik>\r\n\r\n            </ModalBody>\r\n        </Modal>\r\n    )\r\n\r\n}\r\n\r\nexport default ModalUsername\r\n","import { ErrorMessage, Field, Form, Formik } from 'formik'\r\nimport React, { useContext, useEffect, useState } from 'react'\r\nimport { useHistory } from 'react-router-dom'\r\nimport { Button, FormGroup, Input, Label } from 'reactstrap'\r\nimport * as yup from 'yup'\r\nimport { UserContext } from '../../App'\r\n\r\nconst HostMeetingForm = () => {\r\n    const history = useHistory()\r\n    const [error, setError] = useState(null)\r\n    const [loading, setLoading] = useState(false)\r\n    const { setAskForUsername, username, hostMeeting } = useContext(UserContext)\r\n    const initialValues = {\r\n        title: \"\"\r\n    }\r\n    const validationSchema = yup.object({\r\n        title: yup.string().required()\r\n    })\r\n    const onSubmit = ({ title }) => {\r\n        console.log(\"host meeting!\")\r\n        setLoading(true)\r\n        setError(null)\r\n        hostMeeting(title)\r\n        .then( res => {\r\n            console.log(res)\r\n            setLoading(false)\r\n            history.push(\"./meeting/\"+res._id)\r\n        })\r\n        .catch(err => {\r\n            console.error(err)        \r\n            setLoading(false)\r\n            setError(err)\r\n        })\r\n        .finally()\r\n    }\r\n    useEffect(() => {\r\n        if (!username)\r\n            setAskForUsername(true)\r\n    }, [])\r\n    return (\r\n        <>\r\n\r\n            <section className=\"row justify-content-center align-items-center my-5\">\r\n                <div className=\"py-5 col-sm-12 col-md-6\">\r\n                    <img src=\"undraw_shared_workspace_hwky.svg\" alt=\"\" className=\"img-fluid\" />\r\n                </div>\r\n                <div className=\"py-5 col-sm-12 col-md-6\">\r\n                    <h1>\r\n                        <strong>\r\n                            Host a meeting!\r\n                    </strong>\r\n                    </h1>\r\n                    <p className=\"text-muted\">Let's start connecting with people that matter!</p>\r\n\r\n                    <Formik\r\n                        initialValues={initialValues}\r\n                        validationSchema={validationSchema}\r\n                        onSubmit={onSubmit}>\r\n                        <Form>\r\n                            <FormGroup>\r\n                                <Label>\r\n                                    Title for this meeting\r\n                                </Label>\r\n                                <Field as={Input} name=\"title\" />\r\n                                <ErrorMessage name=\"title\">{msg => <div className=\"alert alert-danger mt-2\">{msg}</div> }</ErrorMessage>\r\n                            </FormGroup>\r\n                            <FormGroup className=\"text-right\">\r\n                                <Button color=\"primary\" disabled={loading}>Start Meeting!</Button>\r\n                            </FormGroup>\r\n                        </Form>\r\n                    </Formik>\r\n                    {error && <div className=\"alert alert-danger mt-2\">{error}</div>}\r\n                </div>\r\n            </section>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default HostMeetingForm","import React from 'react'\r\nimport HostMeetingForm from '../../components/HostMeetingForm/HostMeetingForm'\r\n\r\nconst HostMeetingPage = () => {\r\n    return (\r\n        <>\r\n            <HostMeetingForm />\r\n        </>\r\n    )\r\n}\r\n\r\nexport default HostMeetingPage","import { ErrorMessage, Field, Form, Formik } from 'formik'\r\nimport React, { useContext, useEffect } from 'react'\r\nimport { useHistory } from 'react-router-dom'\r\nimport { Button, FormGroup, Input, Label } from 'reactstrap'\r\nimport * as yup from 'yup'\r\nimport { UserContext } from '../../App'\r\nimport JoinMeetingPage from '../../pages/JoinMeetingPage/JoinMeetingPage'\r\n\r\nconst JoinMeetingForm = () => {\r\n\r\n    const history = useHistory()\r\n    const { setAskForUsername, username } = useContext(UserContext)\r\n    const initialValues = {\r\n        link: \"\"\r\n    }\r\n    const validationSchema = yup.object({\r\n        link: yup.string().required()\r\n    })\r\n    const onSubmit = ({ link }) => {\r\n        console.log(\"joining meeting!\")\r\n        // joinMeeting(link)\r\n        window.location.href = link\r\n    }\r\n    useEffect(() => {\r\n        if (!username)\r\n            setAskForUsername(true)\r\n    }, [])\r\n    return (\r\n        <>\r\n\r\n            <section className=\"row justify-content-center align-items-center my-5\">\r\n                <div className=\"py-5 col-sm-12 col-md-6\">\r\n                    <img src=\"undraw_online_connection_6778.svg\" alt=\"\" className=\"img-fluid\" />\r\n                </div>\r\n                <div className=\"py-5 col-sm-12 col-md-6\">\r\n                    <h1>\r\n                        <strong>\r\n                            Join a meeting!\r\n                    </strong>\r\n                    </h1>\r\n                    <p className=\"text-muted\">Did someone share a link with you to connect with them through this sweet website?</p>\r\n                    <Formik\r\n                        initialValues={initialValues}\r\n                        validationSchema={validationSchema}\r\n                        onSubmit={onSubmit}>\r\n                        <Form>\r\n                            <FormGroup>\r\n                                <Label>\r\n                                    Invite link?\r\n                                </Label>\r\n                                <Field as={Input} name=\"link\" />\r\n                                <ErrorMessage name=\"link\">{msg => <div className=\"alert alert-danger\">{msg}</div> }</ErrorMessage>\r\n                            </FormGroup>\r\n                            <FormGroup className=\"text-right\">\r\n                                <Button color=\"primary\">Join Meeting!</Button>\r\n                            </FormGroup>\r\n                        </Form>\r\n                    </Formik>\r\n                </div>\r\n            </section>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default JoinMeetingForm","import React from 'react'\r\nimport JoinMeetingForm from '../../components/JoinMeetingForm/JoinMeetingForm'\r\n\r\nconst JoinMeetingPage = () => {\r\n    return (\r\n        <>\r\n            <JoinMeetingForm />\r\n        </>\r\n    )\r\n}\r\n\r\nexport default JoinMeetingPage","import React, { useEffect, useRef } from 'react'\r\nimport './ParticipantsListItem.css'\r\nimport { FaMicrophoneSlash, FaMicrophone, FaVideoSlash, FaVideo } from 'react-icons/fa'\r\nconst ParticipantsListItem = (props) => {\r\n    let { username, audio, audioTrack, video, toggleAudio, toggleVideo, local } = props\r\n    \r\n    let audioRef = useRef(null)\r\n\r\n    useEffect(() => {\r\n        if (audio && audioRef.current) {\r\n            audioRef.current.srcObject = new MediaStream([audioTrack])\r\n        }\r\n    }, [audio, audioRef])\r\n\r\n\r\n    toggleAudio = toggleAudio ? toggleAudio : () => { }\r\n    toggleVideo = toggleVideo ? toggleVideo : () => { }\r\n    return (\r\n        <div className='mt-3 p'>\r\n            {audio && !local && <audio ref={audioRef} autoPlay />}\r\n            <p className=\"m-0\" style={{ fontWeight: local ? \"bold\" : \"normal\" }}>{username ? username : \"Participant\"}</p>\r\n            <div className=\"icons\">\r\n                {!video ? <div className=\"badge badge-danger btn\" onClick={toggleVideo}><FaVideoSlash /></div> : <div className=\"badge badge-info btn\" onClick={toggleVideo}><FaVideo /></div>}\r\n                {!audio ? <div className=\"badge badge-danger btn\" onClick={toggleAudio}><FaMicrophoneSlash /></div> : <div className=\"badge badge-info btn\" onClick={toggleAudio}><FaMicrophone /></div>}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\nexport default ParticipantsListItem","import React, { useEffect, useRef } from 'react'\r\nimport './LocalParticipant.css'\r\nimport { Button } from 'reactstrap'\r\nimport ParticipantsListItem from '../ParticipantsListItem/ParticipantsListItem'\r\n\r\nconst LocalParticipant = (props) => {\r\n    let {video, videoTrack} = props\r\n    let videoRef = useRef(null)\r\n    useEffect(() => {\r\n        if(video && videoRef){\r\n            videoRef.current.srcObject = new MediaStream([videoTrack])\r\n        }\r\n    }, [video, videoRef])\r\n    return (\r\n        <div className=\"local-participant-wrapper\">\r\n            {video && <video ref={videoRef} muted autoPlay className=\"img-fluid\" />}\r\n            <ParticipantsListItem {...props}/>\r\n            <div className=\"text-center mt-3\">\r\n                <Button color=\"danger\" size=\"sm\">Leave Meeting</Button>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default LocalParticipant","import React from 'react'\r\nimport ParticipantsListItem from '../ParticipantsListItem/ParticipantsListItem'\r\nimport './ParticipantsList.css'\r\nconst ParticipantsList = ({ participants }) => {\r\n    return (\r\n        <div className='participants-list-wrapper'>\r\n            <div className='participants-list-content'>\r\n                {\r\n                    participants.map(_p => {\r\n                        return (\r\n\r\n                            <ParticipantsListItem key={_p.user_id} {..._p} />\r\n                        )\r\n                    })\r\n                }\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ParticipantsList","import React, { useContext } from 'react'\r\nimport { toast } from 'react-toastify'\r\nimport { Button } from 'reactstrap'\r\nimport { HeaderContext } from '../../App'\r\nimport './MeetingInfo.css'\r\nimport {FaGripLines} from 'react-icons/fa'\r\n\r\n\r\nconst MeetingInfo = ({_id, title}) => {\r\n    const { showHeader, setShowHeader } = useContext(HeaderContext)\r\n    const getInvitationLink = () => {\r\n        navigator.clipboard.writeText(\"http://localhost:3000/meeting/\"+_id)\r\n        toast.info(\"Invitation link copied to clipboard\", {\r\n            position: 'bottom-right'\r\n        })\r\n    }\r\n    return (\r\n        <div className='meeting-info'>\r\n            <h3>\r\n                <span className=\"\">\r\n                    {title}\r\n                </span>\r\n            </h3>\r\n            <ul> \r\n                <li>\r\n                    <Button color=\"link\" size=\"sm\" onClick={e=>setShowHeader(!showHeader)} style={{marginRight: 10}}>\r\n                     <FaGripLines />\r\n                    </Button>\r\n                </li>\r\n                <li>\r\n                    <Button color=\"primary\" size=\"sm\" onClick={getInvitationLink}>Invitation link</Button>\r\n                </li>\r\n            </ul>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default MeetingInfo","import React, { useEffect, useRef } from 'react'\r\nimport './ParticipantMiniVideo.css'\r\n\r\nconst ParticipantMiniVideo = (props) => {\r\n    let { video, videoTrack, username, showInfo, onClick } = props\r\n    let videoRef = useRef(null)\r\n    useEffect(() => {\r\n        if (video && videoRef) {\r\n            videoRef.current.srcObject = new MediaStream([videoTrack])\r\n        }\r\n    }, [video, videoRef])\r\n    return (\r\n        <>\r\n            { video && <div onClick={onClick}>\r\n                <video ref={videoRef} muted autoPlay className=\"img-fluid rounded\" />\r\n            {(showInfo ? showInfo : true) && <p className=\"text-muted\">{username ? username : \"Participant\"}</p> }\r\n            </div>}\r\n        </>\r\n    )\r\n}\r\n\r\nexport default ParticipantMiniVideo","import React, { useContext, useEffect, useRef, useState } from 'react'\r\nimport { getAuthHeader, HeaderContext, MeetingContext, UserContext } from '../../App'\r\nimport LocalParticipant from '../../components/LocalParticipant/LocalParticipant'\r\nimport ParticipantsList from '../../components/ParticipantsList/ParticipantsList'\r\nimport { Button, Input, InputGroup, InputGroupAddon, Spinner } from 'reactstrap'\r\nimport { AiOutlineSearch } from 'react-icons/ai'\r\nimport './MeetingPage.css'\r\nimport MeetingInfo from '../../components/MeetingInfo/MeetingInfo'\r\nimport ParticipantMiniVideo from '../../components/ParticipantMiniVideo/ParticipantMiniVideo'\r\n// import { toast } from 'react-toastify'\r\nimport DailyIframe, { } from '@daily-co/daily-js'\r\nimport { toast } from 'react-toastify'\r\nimport axios from 'axios'\r\nimport { } from './../../App'\r\nimport { GrFormClose } from \"react-icons/gr\"\r\n\r\nconst EVENT_JOINING_MEETING = \"joining-meeting\"\r\nconst EVENT_JOINED_MEETING = \"joined-meeting\"\r\nconst EVENT_LEFT_MEETING = \"left-meeting\"\r\n\r\nconst EVENT_PARTICIPANT_JOINED = \"participant-joined\"\r\nconst EVENT_PARTICIPANT_UPDATED = \"participant-updated\"\r\nconst EVENT_PARTICIPANT_LEFT = \"participant-left\"\r\n\r\nconst EVENT_APP_MESSAGE = \"app-message\"\r\n\r\n\r\n\r\n\r\nconst MeetingPage = (props) => {\r\n    const { match: { params } } = props\r\n    const { meetingId } = params\r\n\r\n    const { setShowHeader } = useContext(HeaderContext)\r\n    const { username, setAskForUsername } = useContext(UserContext)\r\n    const { getMeetingInfo } = useContext(MeetingContext)\r\n\r\n    useEffect(() => {\r\n        if (!username)\r\n            setAskForUsername(true)\r\n    }, [])\r\n    const [meeting, setMeeting] = useState(null)\r\n    useEffect(() => {\r\n        if (!meetingId)\r\n            return\r\n        console.log(\"Loading user data\", meetingId)\r\n        getMeetingInfo(meetingId)\r\n            .then(res => {\r\n                console.log(res)\r\n                setMeeting(res)\r\n            })\r\n            .catch(err => {\r\n                console.error(err)\r\n            })\r\n            .finally(() => {\r\n\r\n                setShowHeader(false)\r\n            })\r\n\r\n\r\n    }, [meetingId])\r\n\r\n    const [callObject, setCallObject] = useState(DailyIframe.createCallObject())\r\n    useEffect(() => {\r\n        if (username && meeting) {\r\n            // setCallObject(DailyIframe.createCallObject())\r\n            console.log(\"all good to go!\")\r\n        }\r\n    }, [username, meeting])\r\n\r\n\r\n    const [participants, setParticipants] = useState([])\r\n    const [localParticipant, setLocalParticipant] = useState(null)\r\n    useEffect(() => {\r\n        console.log(\"par updated\", participants)\r\n        for (let _p of participants) {\r\n            if (_p.local) {\r\n                setLocalParticipant(_p)\r\n            }\r\n        }\r\n    }, [participants])\r\n\r\n    const [focusedParticipant, setFocusedParticipant] = useState(null)\r\n    //using refs\r\n    const videosWrapperRef = useRef(null)\r\n    const focusParticipantRef = useRef(null)\r\n    const videosHolderRef = useRef(null)\r\n\r\n\r\n    const focus = (participant) => {\r\n        videosWrapperRef.current.classList.remove(\"no-focus\")\r\n        focusParticipantRef.current.classList.remove(\"no-focus\")\r\n        videosHolderRef.current.classList.remove(\"no-focus\")\r\n        setFocusedParticipant(participant)\r\n    }\r\n    const unFocus = () => {\r\n\r\n        videosWrapperRef.current.classList.add(\"no-focus\")\r\n        focusParticipantRef.current.classList.add(\"no-focus\")\r\n        videosHolderRef.current.classList.add(\"no-focus\")\r\n        setFocusedParticipant(null)\r\n    }\r\n\r\n\r\n\r\n    const loadParticipantInfo = (user_id) => {\r\n        axios.get(\"https://qavm-server.herokuapp.com/users/callerId/\" + user_id)\r\n            .then((res) => {\r\n                setParticipants(_part => {\r\n                    return _part.map(_p => {\r\n                        if (_p.user_id == user_id)\r\n                            return { ..._p, ...res.data }\r\n                        else\r\n                            return _p\r\n                    })\r\n                })\r\n                console.log(res)\r\n            })\r\n            .catch((err) => {\r\n                console.log(err)\r\n            })\r\n            .finally()\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (username && callObject && meeting) {\r\n            console.log('working', username)\r\n            const handleCallObjectEvents = (e) => {\r\n                console.log(e)\r\n                switch (e.action) {\r\n                    case EVENT_JOINED_MEETING:\r\n                        toast.info(e.action.replace(\"-\", \" \"))\r\n                        callObject.setLocalAudio(false)\r\n                        callObject.setLocalVideo(false)\r\n                        let callerId = e.participants.local.user_id\r\n                        //updating caller id\r\n                        axios.put(\"https://qavm-server.herokuapp.com/users/callerId\", { callerId }, { headers: getAuthHeader() })\r\n                            .then(res => {\r\n                                console.log(res)\r\n                                setTimeout(() => {\r\n                                    callObject.sendAppMessage({\r\n                                        type: \"update-my-info\",\r\n                                        by: callerId\r\n                                    })\r\n                                }, 3000)\r\n\r\n                            })\r\n                            .catch()\r\n                            .finally()\r\n\r\n                        setParticipants([\r\n                            ...Object.keys(e.participants).map(\r\n                                k => {\r\n                                    setTimeout(() => {\r\n                                        loadParticipantInfo(e.participants[k].user_id)\r\n                                    }, 3000)\r\n                                    return e.participants[k]\r\n                                }\r\n                            )\r\n                        ])\r\n                        break\r\n\r\n                    case EVENT_JOINING_MEETING:\r\n                        toast.info(e.action.replace(\"-\", \" \") + \", please wait!\")\r\n                        break\r\n\r\n                    case EVENT_LEFT_MEETING:\r\n                        toast.info(e.action.replace(\"-\", \" \"))\r\n                        break\r\n\r\n                    case EVENT_APP_MESSAGE:\r\n                        toast.info(e)\r\n                        break\r\n\r\n                    case EVENT_PARTICIPANT_JOINED:\r\n                        toast.info(e.action.replace(\"-\", \" \"))\r\n                        setParticipants(_part => {\r\n\r\n                            setTimeout(() => {\r\n                                loadParticipantInfo(e.participant.user_id)\r\n                            }, 3000)\r\n                            return [\r\n                                ..._part,\r\n                                e.participant\r\n                            ]\r\n                        })\r\n                        break\r\n\r\n                    case EVENT_PARTICIPANT_LEFT:\r\n                        toast.info(e.action.replace(\"-\", \" \"))\r\n                        setParticipants(_part => {\r\n                            return [\r\n                                ..._part.filter(_p => {\r\n                                    return _p.user_id != e.participant.user_id\r\n                                })\r\n                            ]\r\n                        })\r\n                        break\r\n\r\n                    case EVENT_PARTICIPANT_UPDATED:\r\n\r\n                        setParticipants(_part => {\r\n                            return [\r\n                                ..._part.map(_p => {\r\n                                    if (_p.user_id == e.participant.user_id) {\r\n                                        if (!_p.username)\r\n                                            setTimeout(() => {\r\n                                                loadParticipantInfo(e.participant.user_id)\r\n                                            }, 3000)\r\n\r\n                                        return { ..._p, ...e.participant }\r\n                                    } else\r\n                                        return _p\r\n                                })\r\n                            ]\r\n                        })\r\n                        break\r\n\r\n                }\r\n            }\r\n            let events = [EVENT_APP_MESSAGE, EVENT_JOINING_MEETING, EVENT_JOINED_MEETING, EVENT_LEFT_MEETING, EVENT_PARTICIPANT_JOINED, EVENT_PARTICIPANT_LEFT, EVENT_PARTICIPANT_UPDATED]\r\n            for (let _event of events) {\r\n                callObject.on(_event, handleCallObjectEvents)\r\n            }\r\n\r\n            callObject.join({ url: meeting.room.url })\r\n\r\n            return function () {\r\n                console.log(\"un binding\")\r\n                for (let _event of events) {\r\n                    callObject.off(_event, handleCallObjectEvents)\r\n                }\r\n            }\r\n        }\r\n    }, [callObject, username, meeting])\r\n\r\n    const toggleAudio = () => {\r\n        console.log(\"toggleAudio\")\r\n        if (callObject) {\r\n            callObject.setLocalAudio(!callObject.localAudio())\r\n        }\r\n    }\r\n    const toggleVideo = () => {\r\n        console.log(\"toggleVideo\")\r\n        if (callObject) {\r\n            callObject.setLocalVideo(!callObject.localVideo())\r\n        }\r\n    }\r\n\r\n    return (\r\n        meeting ? (\r\n            <div className='content'>\r\n                <div className='left'>\r\n                    {/* <h3 className=\"px-4 py-2\">participants</h3> */}\r\n                    <form className=\"search px-4 py-2 mt-1\">\r\n                        <InputGroup>\r\n                            <Input type=\"search\" placeholder=\"Search for participants...\" bsSize=\"sm\" />\r\n                            <InputGroupAddon addonType=\"append\" size=\"sm\">\r\n                                <Button color=\"primary\" size=\"sm\">\r\n                                    <AiOutlineSearch />\r\n                                </Button>\r\n                            </InputGroupAddon>\r\n                        </InputGroup>\r\n                    </form>\r\n                    <div className=\"participants px-4 py-2\">\r\n\r\n                        <ParticipantsList participants={\r\n                            participants.filter(_p => {\r\n                                // return search_p.username ? _p.username.includes(search) : true\r\n                                return true\r\n                            })\r\n                        } />\r\n                    </div>\r\n                    <div className=\"local px-5 py-3\">\r\n                        <LocalParticipant {...localParticipant} toggleAudio={toggleAudio} toggleVideo={toggleVideo} />\r\n                    </div>\r\n                </div>\r\n                <div className=\"right\">\r\n                    <div className=\"header px-4 py-2\">\r\n                        <MeetingInfo title={meeting.title} _id={meeting._id} />\r\n                    </div>\r\n                    <div className=\"videos-wrapper no-focus px-4 py-2\" ref={videosWrapperRef}>\r\n                        <div className=\"focus-participant no-focus\" ref={focusParticipantRef}>\r\n                            <div className=\"d-flex mb-3 justify-content-end\">\r\n                                <Button color=\"link\" onClick={unFocus}>\r\n                                    <GrFormClose />\r\n                                </Button>\r\n                            </div>\r\n                            <ParticipantMiniVideo {...focusedParticipant} showInfo={false} />\r\n                        </div>\r\n                        <div className=\"videos-holder no-focus\" ref={videosHolderRef}>\r\n                            {\r\n                                participants.map(_p => {\r\n                                    return (\r\n                                        <ParticipantMiniVideo {..._p} onClick={e => focus(_p)} />\r\n                                    )\r\n                                })\r\n                            }\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        ) : (\r\n                <div style={{ display: \"flex\", justifyContent: \"center\", alignItems: \"center\", height: \"100px\" }}>\r\n                    <p className=\"lead mb-5 text-center\">\r\n                        Please wait, loading meeting details\r\n                        <br />\r\n\r\n                        <Spinner></Spinner>\r\n                    </p>\r\n\r\n                </div>\r\n            )\r\n    )\r\n}\r\n\r\nexport default MeetingPage","import React, { createContext, useEffect, useState } from 'react';\nimport './App.css';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport 'react-toastify/dist/ReactToastify.css';\nimport { ToastContainer, toast } from 'react-toastify';\nimport Header from './components/Header/Header';\nimport { BrowserRouter, Route, Switch, useHistory } from 'react-router-dom';\nimport IndexPage from './pages/IndexPage/IndexPage';\n\nimport ModalUsername from './components/ModalUsername/ModalUsername';\nimport HostMeetingPage from './pages/HostMeetingPage/HostMeetingPage';\nimport JoinMeetingPage from './pages/JoinMeetingPage/JoinMeetingPage';\nimport MeetingPage from './pages/MeetingPage/MeetingPage';\nimport axios from 'axios'\n\nexport const LS_USERNAME = \"username\"\nexport const LS_TOKEN = \"token\"\nexport const UserContext = createContext(null)\nexport const HeaderContext = createContext(false)\nexport const MeetingContext = createContext(null)\nexport const getAuthHeader = () => {\n  let token = localStorage.getItem(LS_TOKEN)\n  return token ? {\n    authorization: \"Bearer \" + token\n  } : {}\n}\nfunction App() {\n  const history = useHistory()\n  const [username, setUsername] = useState(localStorage.getItem(LS_USERNAME))\n  const [askForUsername, setAskForUsername] = useState(false)\n\n\n  const hostMeeting = (title) => {\n    return new Promise((resolve, reject) => {\n      axios.post(\"https://qavm-server.herokuapp.com/meetings/\", { title }, { headers: getAuthHeader() })\n        .then(res => {\n          resolve(res.data)\n          history.push(\"./meetings/\" + res.data._id)\n        })\n        .catch(err => {\n          reject(err.message)\n        })\n        .finally(() => {\n\n        })\n    })\n  }\n  const getMeetingInfo = (_id) => {\n    return new Promise((resolve, reject) => {\n      axios.get(\"https://qavm-server.herokuapp.com/meetings/\" + _id, { headers: getAuthHeader() })\n        .then(res => {\n          resolve(res.data)\n        })\n        .catch(err => {\n          reject(err.message)\n        })\n        .finally(() => {\n\n        })\n    })\n  }\n\n\n  const [showHeader, setShowHeader] = useState(true)\n\n  const login = (username) => {\n    return new Promise((resolve, reject) => {\n      axios.post(\"https://qavm-server.herokuapp.com/users/\", { username })\n        .then(res => {\n          localStorage.setItem(LS_USERNAME, res.data.user.username)\n          localStorage.setItem(LS_TOKEN, res.data.token)\n          setUsername(res.data.user.username)\n          resolve(LS_USERNAME)\n        })\n        .catch(err => {\n          reject(err.message)\n        })\n        .finally()\n    })\n  }\n  const logout = () => {\n    setUsername(null)\n    localStorage.removeItem(LS_USERNAME)\n    localStorage.removeItem(LS_TOKEN)\n  }\n\n\n  return (\n    <MeetingContext.Provider value={{ getMeetingInfo }}>\n      <HeaderContext.Provider value={{ showHeader, setShowHeader }}>\n        <ToastContainer />\n        <UserContext.Provider value={{ username, setUsername, logout, askForUsername, setAskForUsername, login, hostMeeting }}>\n          <BrowserRouter>\n            <ModalUsername />\n            <Header />\n            <div className=\"container\">\n\n              <Switch>\n                <Route path=\"/\" component={IndexPage} exact />\n                <Route path=\"/join\" component={JoinMeetingPage} exact />\n                <Route path=\"/host\" component={HostMeetingPage} exact />\n                <Route path=\"/meeting/:meetingId\" component={MeetingPage} exact />\n              </Switch>\n            </div>\n          </BrowserRouter>\n\n        </UserContext.Provider>\n      </HeaderContext.Provider>\n    </MeetingContext.Provider>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n    <App />,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}